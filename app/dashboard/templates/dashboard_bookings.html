
{% extends "dashboard_base.html" %}

{% block title %}Home{% endblock %}

{% block content %}
<div class="tab-content" id="bookings-table-tab-content">
    <div class="tab-pane fade show active" id="bookings-all" role="tabpanel" aria-labelledby="bookings-all-tab">
        <div class="app-card app-card-orders-table shadow-sm mb-5">
            <div class="app-card-body">
                <div class="table-responsive">
                    <table class="table app-table-hover mb-0 text-left">
                        <thead>
                            <tr>
                                <th class="cell">Customer Name</th>
                                <th class="cell">Phone</th>
                                <th class="cell">Guests</th>
                                <th class="cell">Date</th>
                                <th class="cell">Time</th>
                                <th class="cell">Status</th>
                                <th class="cell">Reference</th>
                                <th class="cell">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for booking in items.items %}
                            <tr>
                                <td class="cell">{{ booking.first_name }} {{ booking.last_name }}</td>
                                <td class="cell">{{ booking.phone }}</td>
                                <td class="cell">{{ booking.guests }}</td>
                                <td class="cell">{{ booking.date.strftime('%Y-%m-%d') }}</td>
                                <td class="cell">{{ booking.time.strftime('%H:%M') }}</td>
                                <td class="cell">
                                    <span class="badge 
                                        {% if booking.status == 'confirmed' %}
                                            bg-success
                                        {% elif booking.status == 'pending' %}
                                            bg-warning
                                        {% else %}
                                            bg-danger
                                        {% endif %}
                                    ">
                                        {{ booking.status.capitalize() }}
                                    </span>
                                </td>
                                <td class="cell text-truncate">{{ booking.reference_number }}</td>
                                <td class="cell">
                                    <a class="btn btn-sm app-btn-primary" href="#">Change Status</a>
                                    <a class="btn btn-sm app-btn-secondary" href="#" data-bs-toggle="modal" data-bs-target="#bookingDetailsModal-{{ booking.id }}">
                                        View Details
                                    </a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div><!--//table-responsive-->
            </div><!--//app-card-body-->
        </div><!--//app-card-->

        <nav class="app-pagination">
            <ul class="pagination justify-content-center">
                {% if items.has_prev %}
                <li class="page-item">
                    <a class="page-link" href="{{ url_for('dashboard.bookings_list', page=items.prev_num) }}">Previous</a>
                </li>
                {% else %}
                <li class="page-item disabled">
                    <a class="page-link" href="#">Previous</a>
                </li>
                {% endif %}

                {% for page_num in range(1, items.pages + 1) %}
                <li class="page-item {% if page_num == items.page %}active{% endif %}">
                    <a class="page-link" href="{{ url_for('dashboard.bookings_list', page=page_num) }}">{{ page_num }}</a>
                </li>
                {% endfor %}

                {% if items.has_next %}
                <li class="page-item">
                    <a class="page-link" href="{{ url_for('dashboard.bookings_list', page=items.next_num) }}">Next</a>
                </li>
                {% else %}
                <li class="page-item disabled">
                    <a class="page-link" href="#">Next</a>
                </li>
                {% endif %} 
            </ul>
        </nav><!--//app-pagination-->
    </div><!--//tab-pane-->
</div><!--//tab-content-->
{% endblock %}
