<!DOCTYPE html>
<html lang="en" data-bs-theme="light">

<head>
  <title>{{restaurant_profile.description}}</title>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Sites meta Data -->
  <meta name="application-name" content="{{restaurant_profile.description}}">
  <!-- OG meta data -->
  
  <link rel="shortcut icon" href="../../../static/assets/picture/favicon.png" type="image/x-icon">
<!-- 引入 jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <link rel="stylesheet" href="../../../static/assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="../../../static/assets/css/aos.css">
  <link rel="stylesheet" href="../../../static/assets/css/all.min.css">
  <link rel="stylesheet" href="../../../static/assets/css/swiper-bundle.min.css">
  <!-- Add SweetAlert2 CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-minimal@5/minimal.css">
  <!-- Add Animate.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

  <!-- main css for template -->
  <link rel="stylesheet" href="../../../static/assets/css/style.css">
</head>

<body>

  <!-- ===============>> Preloader start here <<================= -->
  <div class="preloader">
    <img style="height: 100px; width: 120px;" src="{{ restaurant_profile.image_url }}" alt="preloader icon">
  </div>
  <!-- ===============>> Preloader end here <<================= -->




  <!-- ===============>> Header section start here <<================= -->
  <header class="header">
    <div class="container">
      <div class="header__wrapper">
        <div class="header__brand">
          <a href="{{url_for('home.index')}}" style="font-size: larger; font-weight: bold;"><img src="{{ restaurant_profile.image_url}}" style="width: 75px; height: 50px;" alt="logo">   {{ restaurant_profile.description}}</a>
        </div>
        
        <!-- section navbar Menu -->
        <div class="header__navbar">
          <div class="header__overlay"></div>
          <nav class="menu">
            <div class="menu-mobile-header">
              <button type="button" class="menu-mobile-arrow"><i class="fa-solid fa-arrow-left"></i></button>
              <div class="menu-mobile-title"></div>
              <button type="button" class="menu-mobile-close"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <ul class="menu-section">
              <li><a href="{{ url_for('home.about')}}">About Us</a></li>
              <li><a href="{{ url_for('home.blog')}}">Meet Our Team</a></li>
              <li><a href="#" data-bs-toggle="modal" data-bs-target="#bookingModal">Booking</a></li>
              <li><a href="{{ url_for('home.menu')}}">Menu</a></li>
              <li><a href="{{ url_for('dashboard.overview')}}">Dashboard</a></li>

            </ul>
          </nav>
        </div>
        <div class="header__action">
          <a class="header__action-btn d-none d-xl-grid" href="{{ url_for('home.view_cart') }}">
            <svg width="24" height="24" viewbox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="cart-icon">
              <path d="M4.92383 18.2228C4.92383 18.6943 5.11832 19.1464 5.46451 19.4798C5.81071 19.8132 6.28025 20.0005 6.76985 20.0005C7.25944 20.0005 7.72899 19.8132 8.07518 19.4798C8.42138 19.1464 8.61587 18.6943 8.61587 18.2228C8.61587 17.7513 8.42138 17.2991 8.07518 16.9658C7.72899 16.6324 7.25944 16.4451 6.76985 16.4451C6.28025 16.4451 5.81071 16.6324 5.46451 16.9658C5.11832 17.2991 4.92383 17.7513 4.92383 18.2228Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
              <path d="M15.0762 18.2228C15.0762 18.6943 15.2707 19.1464 15.6169 19.4798C15.9631 19.8132 16.4326 20.0005 16.9222 20.0005C17.4118 20.0005 17.8813 19.8132 18.2275 19.4798C18.5737 19.1464 18.7682 18.6943 18.7682 18.2228C18.7682 17.7513 18.5737 17.2991 18.2275 16.9658C17.8813 16.6324 17.4118 16.4451 16.9222 16.4451C16.4326 16.4451 15.9631 16.6324 15.6169 16.9658C15.2707 17.2991 15.0762 17.7513 15.0762 18.2228Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
              <path d="M16.923 16.4446H6.76985V4.00049H4.92383" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
              <path d="M6.76953 5.77881L19.6917 6.66767L18.7687 12.8897H6.76953" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </a>
          <a href="{{ url_for('home.view_cart') }}" class="header__action-btn menu-icon d-xl-none"><i class="fa-solid fa-cart-shopping"></i></a>
          <a class="header__action-btn d-none d-xl-grid" href="{{url_for('home.customer_info')}}"><i class="fa-regular fa-user"></i></a>
         
          {% if current_user.is_authenticated %}
            <!-- 已登录，显示 Logout 链接 -->
            <img src="{{ current_user.image_url }}" alt="Avatar" style="width: 30px; height: 30px; border-radius: 50%;">

   
             <span >Hi {{current_user.first_name }}</span>
            <!-- imge -->
    
            <a href="{{ url_for('home.logout') }}" class="d-none d-xl-grid">Logout</a>
          {% else %}
            <!-- 未登录，显示 Register/Login 链接 -->
            <a href="{{ url_for('home.account') }}" class="d-none d-xl-grid">Register/Login</a>
          {% endif %}

        </div>
      </div>

    </div>
  </header>
  <!-- ===============>> Header section end here <<================= -->

  <!-- ===============>> content starts here <<================= -->
  {% with messages = get_flashed_messages() %}
  {% if messages %}
    <div class="alert alert-info">
      <ul>
      {% for message in messages %}
        <li>{{ message }}</li>
      {% endfor %}
      </ul>
    </div>
  {% endif %}
  {% endwith %}
  {% block content %}
  {% endblock %}





  <!-- ===============>> footer start here <<================= -->
  <footer class="footer ">
    <div class="footer__top">
      <div class="container">
        <div class="footer__top-wrapper">
          <div class="row gy-5 gx-2">
            <div class="col-xl-4 col-lg-6 col-md-6">
              <div class="footer__about">
                <a href="" class="footer__about-logo" style="font-size: large; font-weight: bold;"><img style="width: 100px; height: 75px;"" src="{{ restaurant_profile.image_url }}" alt="Logo">  {{ restaurant_profile.description }}</a>
                <p class="footer__about-moto ">We offer good vege food to our customers.</p>
                <div class="footer__social">
                  <ul class="social">
                    <li class="social__item">
                      <a href="#" class="social__link social__link--style2"><i class="fab fa-facebook-f"></i></a>
                    </li>
                    <li class="social__item">
                      <a href="#" class="social__link social__link--style2"><i class="fa-brands fa-linkedin-in"></i></a>
                    </li>
                    <li class="social__item">
                      <a href="#" class="social__link social__link--style2"><i class="fab fa-youtube"></i></a>
                    </li>
                    <li class="social__item">
                      <a href="#" class="social__link social__link--style2"><i class="fa-brands fa-x-twitter"></i></a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="col-xl-2 col-md-3 col-sm-6 col-6">
              <div class="footer__links">
                <div class="footer__links-tittle">
                  <h4>Account</h4>
                </div>
                <div class="footer__links-content">
                  <ul class="footer__linklist">
                    <li class="footer__linklist-item"> <a href="login.html">Sign In</a>
                    </li>
                    <li class="footer__linklist-item"> <a href="cart.html">View Cart</a>
                    </li>
                    <li class="footer__linklist-item"> <a href="wishlist.html">My Wishlist</a></li>
                    <li class="footer__linklist-item"> <a href="invoice.html">Shipping Details</a> </li>
                  </ul>
                </div>
              </div>
            </div>
         
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="bookingModal" tabindex="-1" aria-labelledby="bookingModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
          <div class="modal-header bg-light">
            <h5 class="modal-title" id="bookingModalLabel">
              <i class="fas fa-calendar-check me-2"></i>Make a Reservation
            </h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form id="bookingForm" class="needs-validation" novalidate>
              <div class="row g-3">
                <!-- Personal Information -->
                <div class="col-md-6">
                  <div class="card h-100">
                    <div class="card-header bg-light">
                      <h6 class="mb-0"><i class="fas fa-user me-2"></i>Personal Information</h6>
                    </div>
                    <div class="card-body">
                      <div class="mb-3">
                        <label for="first_name" class="form-label">First Name</label>
                        <input type="text" class="form-control" id="first_name" name="first_name" required>
                        <div class="invalid-feedback">Please enter your first name.</div>
                      </div>
                      <div class="mb-3">
                        <label for="last_name" class="form-label">Last Name</label>
                        <input type="text" class="form-control" id="last_name" name="last_name" required>
                        <div class="invalid-feedback">Please enter your last name.</div>
                      </div>
                      <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" name="email" required>
                        <div class="invalid-feedback">Please enter a valid email address.</div>
                      </div>
                      <div class="mb-3">
                        <label for="phone" class="form-label">Phone</label>
                        <input type="tel" class="form-control" id="phone" name="phone" required>
                        <div class="invalid-feedback">Please enter your phone number.</div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Reservation Details -->
                <div class="col-md-6">
                  <div class="card h-100">
                    <div class="card-header bg-light">
                      <h6 class="mb-0"><i class="fas fa-clock me-2"></i>Reservation Details</h6>
                    </div>
                    <div class="card-body">
                      <div class="mb-3">
                        <label for="guests" class="form-label">Number of Guests</label>
                        <select class="form-select" id="guests" name="guests" required>
                          <option value="">Select number of guests</option>
                          <option value="1">1 Person</option>
                          <option value="2">2 People</option>
                          <option value="3">3 People</option>
                          <option value="4">4 People</option>
                          <option value="5">5 People</option>
                          <option value="6">6 People</option>
                          <option value="7">7 People</option>
                          <option value="8">8 People</option>
                        </select>
                        <div class="invalid-feedback">Please select number of guests.</div>
                      </div>

                      <div class="mb-3">
                        <label for="date" class="form-label">Date</label>
                        <input type="date" class="form-control" id="date" name="date" required min="{{ today_date }}">
                        <div class="invalid-feedback">Please select a valid date.</div>
                      </div>

                      <div class="mb-3">
                        <label class="form-label">Choose a Time</label>
                        <div id="time-buttons" class="d-flex flex-wrap gap-2">
                          {% for t in time_slots %}
                            <button type="button" class="btn btn-outline-primary time-button" data-time="{{ t }}">{{ t }}</button>
                          {% endfor %}
                        </div>
                        <input type="hidden" id="selected-time" name="time" value="">
                        <div class="invalid-feedback">Please select a time slot.</div>
                      </div>

                      <div class="mb-3">
                        <label for="message" class="form-label">Special Requests</label>
                        <textarea class="form-control" id="message" name="message" rows="3" placeholder="Any special requests or dietary requirements?"></textarea>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div id="form-alert" class="alert alert-danger d-none mt-3"></div>
              
              <div class="modal-footer bg-light">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" id="submitBooking" class="btn btn-primary">
                  <i class="fas fa-check me-2"></i>Confirm Booking
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>




    <div class="footer__shape">
      <span class="footer__shape-item footer__shape-item--1"><img src="../../../static/assets/picture/leaf.png" alt="shape icon"></span>

      <span class="footer__shape-item footer__shape-item--2"><img src="../../../static/assets/picture/tomato.png" alt="shape icon"></span>

      <span class="footer__shape-item footer__shape-item--3"><img src="../../../static/assets/picture/chilli.png" alt="shape icon"></span>
    </div>
  </footer>
  <!-- ===============>> footer end here <<================= -->



  <!-- ===============>> scrollToTop start here <<================= -->
  <a href="#" class="scrollToTop scrollToTop--style1"><i class="fa-solid fa-arrow-up-from-bracket"></i></a>
  <!-- ===============>> scrollToTop ending here <<================= -->


  <!-- vendor plugins -->

  <script src="../../../static/assets/js/metismenujs.min.js"></script>
  <script src="../../../static/assets/js/bootstrap.bundle.min.js"></script>
  <script src="../../../static/assets/js/all.min.js"></script>
  <script src="../../../static/assets/js/swiper-bundle.min.js"></script>
  <script src="../../../static/assets/js/aos.js"></script>
  <script src="../../../static/assets/js/fslightbox.js"></script>
  <script src="../../../static/assets/js/purecounter_vanilla.js"></script>
  <script src="../../../static/assets/js/trk-menu.js"></script>
  <script src="../../../static/assets/js/custom.js"></script>
  <!-- Add SweetAlert2 JS -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</body>

<script>
$(document).ready(function () {
  // 时间按钮点击处理
  $('.time-button').click(function () {
    const selectedTime = $(this).data('time');
    $('#selected-time').val(selectedTime);

    $('.time-button').removeClass('btn-primary').addClass('btn-outline-primary');
    $(this).removeClass('btn-outline-primary').addClass('btn-primary');
  });

  // 表单提交处理
  $('#bookingForm').submit(function (e) {
    e.preventDefault();
    const formData = $('#bookingForm').serialize();


    $.ajax({
      url: '/booking',
      method: 'POST',
      data: formData,
      success: function (response) {
        if (response.success) {
          Swal.fire({
            title: '<strong>Booking Confirmed!</strong>',
            icon: 'success',
            html: `
              <div class="text-start">
                <div class="mb-3">
                  <h5 class="text-success mb-2">Booking Details</h5>
                  <p class="mb-1"><strong>Reference Number:</strong> ${response.reference_number}</p>
                  <p class="mb-1"><strong>Date:</strong> ${$('#date').val()}</p>
                  <p class="mb-1"><strong>Time:</strong> ${$('#selected-time').val()}</p>
                  <p class="mb-1"><strong>Guests:</strong> ${$('#guests').val()}</p>
                </div>
                <div class="alert alert-info mb-0">
                  <i class="fas fa-info-circle me-2"></i>
                  A confirmation email has been sent to ${$('#email').val()}
                </div>
              </div>
            `,
            showCloseButton: true,
            showConfirmButton: true,
            confirmButtonText: 'Done',
            confirmButtonColor: '#28a745',
            customClass: {
              container: 'booking-confirmation-modal'
            }
          }).then((result) => {
            if (result.isConfirmed) {
              $('#bookingModal').modal('hide');
              $('#bookingForm')[0].reset();
              $('#selected-time').val('');
              $('.time-button').removeClass('btn-primary').addClass('btn-outline-primary');
              $('#form-alert').addClass('d-none');
            }
          });
        } else {
          Swal.fire({
            title: 'Booking Failed',
            text: response.error || 'Unknown error occurred. Please try again.',
            icon: 'error',
            confirmButtonColor: '#dc3545'
          });
        }
      },
      error: function () {
        Swal.fire({
          title: 'Error',
          text: 'There was an error processing your booking. Please try again.',
          icon: 'error',
          confirmButtonColor: '#dc3545'
        });
      }
    });
  });
});
</script>

</html>